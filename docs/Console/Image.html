<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/default.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
</head>

<body class="markdown-body">
    <h1 dir="auto" id="image-1">Image</h1>
    <h2 dir="auto" id="tiling-mode-1">Tiling Mode</h2>
    <p dir="auto">The memory layout of the texture is determined by the <strong>tiling mode</strong>
        (VkImageTiling).<br>
        The <strong>linear tiling mode</strong> (VK_IMAGE_TILING_LINEAR) is exactly the natural memory layout of the
        <strong>C++ 2D array</strong>. However, by &quot;A.4.4 Blocked 2D Arrays&quot; of <a
            href="https://pbr-book.org/3ed-2018/Utilities/Memory_Management#Blocked2DArrays">PBRT-V3</a>, the linear
        tiling mode is NOT efficient when the 2D texture is indexed by (u, v), since the adjacent locations in the v
        direction would be on different cache line.<br>
        The <strong>optimal tiling mode</strong> (VK_IMAGE_TILING_OPTIMAL) is the efficient memory layout of which the
        implementation is vendor dependent. By &quot;A.4.4 Blocked 2D Arrays&quot; of <a
            href="https://pbr-book.org/3ed-2018/Utilities/Memory_Management#Blocked2DArrays">PBRT-V3</a>, the
        <strong>Blocked 2D Array</strong> can be one implementation. And by &quot;Figure 23.15&quot; of <a
            href="https://www.realtimerendering.com/">Real-Time Rendering Fourth Edition</a>, the <strong>Morton
            sequence</strong> can be one implementation. And for AMD GPU, the AMD addrlib <a
            href="https://gitlab.freedesktop.org/mesa/mesa/-/blob/22.3/src/amd/vulkan/radv_meta_bufimage.c#L1372">ac_surface_addr_from_coord</a>
        can be used to calculate the address from the (u, v) index.<br>
        <img src="Image-1.png" alt="Morton sequence" data-src="Image-1.png">
    </p>
    <h2 dir="auto" id="metadata-1">Metadata</h2>
    <p dir="auto">CB (Color Block) Metadata</p>
    <p dir="auto">DCC (Delta Color Compression) <a href="https://gpuopen.com/learn/dcc-overview/">Getting the Most Out
            of Delta Color Compression</a></p>
    <p dir="auto"><a
            href="https://gitlab.freedesktop.org/mesa/mesa/-/blob/22.3/src/amd/vulkan/radv_meta_dcc_retile.c#L110">radv_device_init_meta_dcc_retile_state</a>
    </p>
    <p dir="auto">CMASK (Color Mask) <a href="https://asurati.github.io/wip/post/2022/06/14/hd-7350-demo-msaa-8x/">HD
            7350 demo: MSAA 8x</a><br>
        FMask (Fragment Mask) VK_AMD_shader_fragment_mask</p>
    <p dir="auto">DB (Depth Block) Metadata<br>
        HTILE: HiZ(Hierarchical Z)</p>
    <p dir="auto">D3D12_RESOURCE_FLAG_DENY_SHADER_RESOURCE</p>

</body>

</html>