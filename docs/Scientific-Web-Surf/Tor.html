<!doctype html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/default.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

</head>
<body class="markdown-body">
<h1 id="tor-bridge">Tor Bridge</h1>
<p>You may rent the CentOS 8 machine by the Vultr / Alibaba Cloud and deploy your own Tor bridge by the following tutorial.</p>
<h2 id="1deploy-tor-bridge-server-side">1.deploy Tor bridge (server side)</h2>
<h3 id="1-1install-tor">1-1.install Tor</h3>
<pre><code class="code-line language-bash"><div>
yum install epel-release
yum update

yum install tor

<span class="hljs-comment"># enable automatic update </span>
yum install dnf-automatic
systemctl <span class="hljs-built_in">enable</span> dnf-automatic-install.timer
systemctl restart dnf-automatic-install.timer
<span class="hljs-comment"># systemctl status dnf-automatic-install.timer</span>
</div></code></pre>
<h3 id="1-2edit-tor-config">1-2.edit Tor config</h3>
<pre><code class="code-line language-bash"><div>vi /etc/tor/torrc

- <span class="hljs-comment">#SOCKSPort 9050 # Default: Bind to localhost:9050 for local connections.</span>
+ SOCKSPort 0 <span class="hljs-comment"># Set &quot;SOCKSPort 0&quot; if you plan to run Tor only as a relay, and not make any local application connections yourself.</span>

- <span class="hljs-comment">#RunAsDaemon 1</span>
+ RunAsDaemon 1

- <span class="hljs-comment">#ORPort 9001</span>
+ ORPort 9001

- <span class="hljs-comment">#Nickname ididnteditheconfig</span>
+ Nickname TorofHanetakaYuminaga <span class="hljs-comment">#your cool nickname</span>

- <span class="hljs-comment">#ExitRelay 1</span>
+ ExitRelay 0

- <span class="hljs-comment">#BridgeRelay 1</span>
+ BridgeRelay 1
</div></code></pre>
<h3 id="1-3start-tor-service">1-3.start Tor service</h3>
<pre><code class="code-line language-bash"><div>firewall-cmd --add-port 9001/tcp <span class="hljs-comment">## --zone=public ## configure firewalld to allow the &quot;ORPort&quot;</span>
<span class="hljs-comment"># firewall-cmd --list-ports ## --zone=public</span>
firewall-cmd --add-masquerade <span class="hljs-comment">## --zone=public</span>
<span class="hljs-comment"># firewall-cmd --query-masquerade ## --zone=public</span>
firewall-cmd --runtime-to-permanent
firewall-cmd --reload

systemctl <span class="hljs-built_in">enable</span> tor
systemctl restart tor
<span class="hljs-comment">#systemctl status tor</span>
</div></code></pre>
<h2 id="2use-tor-bridge-client-side">2.use Tor bridge (client side)</h2>
<h3 id="2-1client-side---linuxmacoswindows">2-1.client side - Linux/MacOS/Windows</h3>
<h4 id="2-1-1use-tor-browser">2-1-1.use Tor Browser</h4>
<p>download the &quot;Tor Browser&quot; from <a href="https://www.torproject.org/download/">https://www.torproject.org/download/</a></p>
<p>open the &quot;Tor Browser&quot; and config the bridge &quot;x.x.x.x:9001&quot; by the UI<br>
the &quot;Tor Browser&quot; will launch the &quot;Tor&quot; and listen on localhost:9150 #you can use &quot;ps&quot; to find the related command args of &quot;Tor&quot;</p>
<h4 id="2-1-2launch-app-with-socks5-proxy-suggested">2-1-2.launch app with socks5 proxy (suggested)</h4>
<pre><code class="code-line language-bash"><div><span class="hljs-comment">#close all opened &quot;chrome&quot;s </span>

<span class="hljs-string">&quot;C:\Program Files (x86)\Google\Chrome\Application\chrome.exe&quot;</span> --proxy-server=<span class="hljs-string">&quot;socks5://localhost:9150&quot;</span> <span class="hljs-comment">#Windows</span>

<span class="hljs-string">&quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot;</span> --proxy-server=<span class="hljs-string">&quot;socks5://localhost:9150&quot;</span> &amp; <span class="hljs-comment">#MacOS</span>

google-chrome --proxy-server=<span class="hljs-string">&quot;socks5://localhost:9150&quot;</span> &amp; <span class="hljs-comment">#Linux</span>
</div></code></pre>
<h4 id="2-1-3other-usage-not-suggested--set-the-socks5-proxy-in-system-settings">2-1-3.other usage (not suggested) / set the socks5 proxy in system settings</h4>
<pre><code class="code-line language-bash"><div>KDE5/System Settings/Network/Settings/Proxy/Use system proxy configuration:/SOCKS Proxy:socks5://localhost:9050
<span class="hljs-comment">#https://wiki.archlinux.org/index.php/Proxy_server#Proxy_settings_on_GNOME3</span>
</div></code></pre>
<h3 id="2-2client-side---linux-tor-without-the-tor-browser">2-2.client side - Linux (Tor without the Tor Browser)</h3>
<h4 id="2-2-1install-tor">2-2-1.install Tor</h4>
<pre><code class="code-line language-bash"><div>
yum install epel-release
yum update

yum install tor

<span class="hljs-comment"># enable automatic update </span>
yum install dnf-automatic
systemctl <span class="hljs-built_in">enable</span> dnf-automatic-install.timer
systemctl restart dnf-automatic-install.timer
<span class="hljs-comment"># systemctl status dnf-automatic-install.timer</span>
</div></code></pre>
<h4 id="2-2-2edit-tor-config">2-2-2.edit Tor config</h4>
<pre><code class="code-line language-bash"><div>vi /etc/tor/torrc

+ UseBridges 1

+ Bridge x.x.x.x:9001

- SOCKSPort 9050 <span class="hljs-comment"># Default: Bind to localhost:9050 for local connections.</span>
+ SOCKSPort 9050 <span class="hljs-comment"># Default: Bind to localhost:9050 for local connections.</span>

- <span class="hljs-comment">#RunAsDaemon 1</span>
+ RunAsDaemon 1
</div></code></pre>
<h4 id="2-2-3start-tor-service">2-2-3.start Tor service</h4>
<pre><code class="code-line language-shell"><div>systemctl enable tor
systemctl restart tor
<span class="hljs-meta">#</span><span class="bash">systemctl status tor</span>
</div></code></pre>
<h4 id="2-2-4launch-app-with-socks5-proxy-suggested">2-2-4.launch app with socks5 proxy (suggested)</h4>
<pre><code class="code-line language-shell"><div><span class="hljs-meta">#</span><span class="bash">close all opened <span class="hljs-string">&quot;google-chrome&quot;</span>s</span> 
google-chrome --proxy-server=&quot;socks5://localhost:9050&quot; &amp;
<span class="hljs-meta">#</span><span class="bash">systemctl restart tor <span class="hljs-comment">#we may restart tor from time to time if the network is too slow</span></span>
</div></code></pre>
<h4 id="2-2-5other-usage-not-suggested--set-the-socks5-proxy-in-system-settings">2-2-5.other usage (not suggested) / set the socks5 proxy in system settings</h4>
<pre><code class="code-line language-shell"><div>KDE5/System Settings/Network/Settings/Proxy/Use system proxy configuration:/SOCKS Proxy:socks5://localhost:9050
<span class="hljs-meta">#</span><span class="bash">https://wiki.archlinux.org/index.php/Proxy_server<span class="hljs-comment">#Proxy_settings_on_GNOME3</span></span>
</div></code></pre>
<h3 id="2-3client-side--android-orbot">2-3.client side -Android (orbot)</h3>
<p><a href="https://github.com/guardianproject/orbot/releases">https://github.com/guardianproject/orbot/releases</a></p>

</body>
</html>