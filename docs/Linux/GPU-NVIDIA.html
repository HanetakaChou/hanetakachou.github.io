<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/default.min.css">
</head>

<body class="markdown-body">
    <p dir="auto"><a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#runfile-nouveau">NVIDIA
            - Disabling Nouveau</a></p>
    <pre><code class="code-line language-bash" dir="auto"><span class="hljs-comment"># CentOS</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;blacklist nouveau&#x27;</span> &gt; /etc/modprobe.d/blacklist-nouveau.conf
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;options nouveau modeset=0&#x27;</span> &gt;&gt; /etc/modprobe.d/blacklist-nouveau.conf  
dracut --force
grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg  

<span class="hljs-comment"># Debian</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;blacklist nouveau&#x27;</span> &gt; /etc/modprobe.d/blacklist-nouveau.conf
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;options nouveau modeset=0&#x27;</span> &gt;&gt; /etc/modprobe.d/blacklist-nouveau.conf
update-initramfs -u
update-grub

<span class="hljs-comment"># Ubuntu</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;blacklist nouveau&#x27;</span> &gt; /etc/modprobe.d/blacklist-nouveau.conf
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;options nouveau modeset=0&#x27;</span> &gt;&gt; /etc/modprobe.d/blacklist-nouveau.conf
update-initramfs -u
update-grub

lsmod | grep nouveau
</code></pre>
    <p dir="auto"><a href="https://wiki.archlinux.org/title/NVIDIA">Arch Linux - NVIDIA</a><br>
        <a href="https://download.nvidia.com/XFree86/Linux-x86_64/555.58.02/README/kms.html">NVIDIA - Modesetting</a>
    </p>
    <pre><code class="code-line language-bash" dir="auto">
<span class="hljs-comment"># Nvidia modesetting support. </span>
<span class="hljs-comment"># Set to 0 or comment to disable kernel modesetting support. </span>
<span class="hljs-comment"># This must be disabled in case of Mosaic or SLI.</span>

<span class="hljs-comment"># CentOS</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;options nvidia-drm modeset=0 fbdev=0&#x27;</span> &gt; /etc/modprobe.d/nvidia-modeset.conf
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;options nvidia NVreg_DynamicPowerManagement=0x02&#x27;</span> &gt; /etc/modprobe.d/nvidia-power-management.conf
dracut --force
grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg  

<span class="hljs-built_in">cat</span> /sys/module/nvidia_drm/parameters/modeset
</code></pre>
    <p dir="auto"><a href="https://docs.nvidia.com/deploy/driver-persistence/index.html#persistence-daemon">NVIDIA -
            Persistence Daemon</a></p>
    <pre><code class="code-line language-bash" dir="auto">nvidia-persistenced --user HanetakaChou  
<span class="hljs-comment"># systemctl status nvidia-persistenced</span>

<span class="hljs-comment"># nvidia-smi -pm 1</span>
<span class="hljs-comment"># nvidia-smi -pm 0</span>
</code></pre>
    <p dir="auto"><a
            href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#package-manager-installation">NVIDIA
            - Package Manager Installation</a></p>
    <pre><code class="code-line language-bash" dir="auto"><span class="hljs-comment"># CentOS</span>
<span class="hljs-comment"># https://developer.download.nvidia.com/compute/cuda/repos/rhel9/x86_64/cuda-rhel9.repo</span>

<span class="hljs-comment"># Debian</span>
apt install https://developer.download.nvidia.com/compute/cuda/repos/debian11/x86_64/cuda-keyring_1.0-1_all.deb

<span class="hljs-comment"># Ubuntu</span>
apt install https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-keyring_1.0-1_all.deb

</code></pre>
    <p dir="auto"><a
            href="https://docs.nvidia.com/datacenter/tesla/driver-installation-guide/index.html#open-kernel-modules">NVIDIA
            - Open Kernel Modules</a><br>
        <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#meta-packages">NVIDIA - Meta
            Packages</a>
    </p>
    <pre><code class="code-line language-bash" dir="auto"><span class="hljs-comment"># CentOS</span>
yum module reset nvidia-driver
yum module install nvidia-driver:555-dkms
<span class="hljs-comment"># yum module install nvidia-driver:latest-dkms</span>
<span class="hljs-comment"># yum module install nvidia-driver:560-open</span>
<span class="hljs-comment"># yum module install nvidia-driver:open-dkms</span>

yum install nvidia-driver-libs.i686

yum install cuda-runtime-12-5
<span class="hljs-comment"># yum install cuda-runtime-12-6</span>

<span class="hljs-comment"># cd /usr/src/nvidia-555.42.06</span>
<span class="hljs-comment"># dkms install nvidia/555.42.06</span>

<span class="hljs-comment"># Debian</span>
apt install nvidia-driver
apt install libgl1-nvidia-glvnd-glx
apt install libgl1-nvidia-glvnd-glx:i386  
apt install nvidia-vulkan-icd
apt install nvidia-vulkan-icd:i386  

<span class="hljs-comment"># Ubuntu</span>
apt install nvidia-driver-520
apt install libnvidia-gl-520
apt install libnvidia-gl-520:i386
</code></pre>
    <p dir="auto"><a href="https://wiki.archlinux.org/index.php/NVIDIA_Optimus#Using_PRIME_render_offload">Arch Linux -
            NVIDIA Optimus</a><br>
        <a href="https://wiki.archlinux.org/title/PRIME#PRIME_render_offload">Arch Linux - PRIME</a><br>
        <a href="https://download.nvidia.com/XFree86/Linux-x86_64/435.17/README/primerenderoffload.html">NVIDIA - PRIME
            Render Offload</a><br>
        <a href="https://github.com/archlinux/svntogit-packages/blob/packages/nvidia-prime/trunk/prime-run">Arch Linux -
            prime run</a><br>
        <a href="https://wiki.archlinux.org/title/NVIDIA">Arch Linux - NVIDIA</a>
    </p>
    <pre><code class="code-line language-bash" dir="auto"><span class="hljs-comment"># CentOS</span>

<span class="hljs-comment"># We should replace the configuration file otherwise the X can NOT start up  </span>

<span class="hljs-comment"># We may simply delete </span>
<span class="hljs-comment"># rm /etc/X11/xorg.conf.d/10-nvidia.conf  </span>

<span class="hljs-comment"># Or we may comment out the &#x27;Option &quot;PrimaryGPU&quot; &quot;yes&quot;&#x27;</span>
vi /etc/X11/xorg.conf.d/10-nvidia.conf  
<span class="hljs-comment"># ...</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># Section &quot;OutputClass&quot;</span>
<span class="hljs-comment"># ...</span>
<span class="hljs-comment">#    # Option &quot;PrimaryGPU&quot; &quot;yes&quot;</span>
<span class="hljs-comment"># ... </span>

<span class="hljs-comment"># reboot</span>
xrandr --listproviders | grep <span class="hljs-string">&#x27;NVIDIA-G0&#x27;</span>

<span class="hljs-built_in">env</span> __NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia glxinfo
<span class="hljs-built_in">env</span> __NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia steam &amp; <span class="hljs-built_in">disown</span>

nvidia-smi
</code></pre>

</body>

</html>